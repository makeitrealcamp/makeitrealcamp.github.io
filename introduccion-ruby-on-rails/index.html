<!DOCTYPE html>
<html lang="es">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title> Introducción a Ruby on Rails </title>
  <meta name="description" content="Ruby on Rails es un framework para crear aplicaciones Web, escrito en el lenguaje de programación Ruby, y diseñado para que el desarrollo de aplicaciones Web...">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Introducción a Ruby on Rails">
<meta property="og:type" content="article">
<meta property="og:url" content="http://blog.makeitreal.camp/introduccion-ruby-on-rails/">


  <meta property="og:image" content="http://blog.makeitreal.camp/assets/images/bg-images/ruby-on-rails.jpg">



<meta property="og:site_name" content="El Blog de Make it Real">
<meta property="og:locale" content="es_CO">


  <meta property="article:published_time" content="2015-03-22T12:00:00-05:00">
  <meta property="article:author" content="Germán Escobar">



  <link rel="canonical" href="http://blog.makeitreal.camp/introduccion-ruby-on-rails/">
  <link rel="alternate" type="application/rss+xml" title="El Blog de Make it Real" href="/feed.xml">

  <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans+Condensed:700|Open+Sans:400,300,600,700' type='text/css'>
  <link rel="stylesheet" href="/assets/stylesheets/main.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="/assets/javascripts/main.js" charset="utf-8"></script>
  <script src="/assets/javascripts/prism.min.js" charset="utf-8"></script>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-18132057-9', 'auto');
  ga('send', 'pageview');
</script>

  
</head>

  <body>
    <nav class="main">
  <div class="container">
    <div class="main-content">
      <a href="https://makeitreal.camp/?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=logo"><img src="/assets/images/logo-makeitreal-white.png" alt="Make it Real Logo"></a>
      <a href="https://makeitreal.camp/?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=programs#programs" class="btn-cta">Conoce nuestros programas</a>
      <div class="secret" style="display: none;">HcUy6Re2LLBRtj</div>
    </div>
  </div>
</nav>

    <div class="content"><div class="post-page">
  <div class="container">
    <div class="row justify-content-md-center">
      <div class="col-lg-10 col-xl-9">
        <a href="/">&larr; Volver a la lista de posts</a>

        <div class="post">
          <div class="post-image" style="background-image: url(/assets/images/bg-images/ruby-on-rails.jpg)"></div>
          <div class="row justify-content-md-center">
            <div class="col-md-10">
              <div class="post-content">
                <div class="post-details">
                  <div class="post-author">
                    <img class="img-responsive" src="//www.gravatar.com/avatar/12270acfe9b6842e1a5b6e594382f149.jpg?s=80"/>
                    <span>Germán Escobar</span>
                  </div>
                  <time class="post-date">Mar 22, 2015</time>
                </div>
                <h1>Introducción a Ruby on Rails</h1>
                <div class="post-body"><p><strong>Ruby on Rails</strong> es un framework para crear aplicaciones Web, escrito en el lenguaje de programación <strong>Ruby</strong>, y diseñado para que el desarrollo de aplicaciones Web sea fácil y divertido.<!-- more --></p>

<p>Asumiendo que ya tienes <strong>Ruby</strong> instalado, crear un nuevo proyecto en <strong>Rails</strong> es tan fácil como ejecutar los siguientes comandos en la consola:</p>

<pre><code class="language-none">$ gem install rails
$ rails new mi_app
$ cd mi_app
$ rails server</code></pre>

<p>El primer comando instala <strong>Rails</strong>. El segundo comando crea una carpeta con los archivos del proyecto. El tercer comando ingresa a la carpeta del proyecto. Y el último inicia el servidor. Eso es todo. Después de ejecutar esos comandos puedes ingresar a <code class="highlighter-rouge">http://localhost:3000/</code> y ver la pantalla que por defecto crea Rails. <strong>¡Felicitaciones, has creado tu primera aplicación Web!</strong> Aún no está publicada en Internet, pero al menos puedes accederla localmente desde tu computador.</p>

<p>Los 5 componentes más importantes del framework son los siguientes:</p>

<ul>
  <li>Enrutador.</li>
  <li>Vistas.</li>
  <li>ActiveRecord (la capa de acceso a datos).</li>
  <li>Migraciones.</li>
  <li>Aplicación de consola.</li>
</ul>

<h2 id="el-enrutador">El enrutador</h2>

<p>El objetivo de todos los frameworks de desarrollo Web, incluido <strong>Rails</strong>, es el de <strong>mapear (o relacionar) URL’s</strong> (p.e. <code class="highlighter-rouge">http://localhost:3000/productos</code>) <strong>al código que va a procesar esas peticiones</strong>.</p>

<p>Por ejemplo, supongamos que queremos crear una ruta para que cuando un usuario ingrese a <code class="highlighter-rouge">http://localhost:3000/productos</code> desde su navegador (p.e. Chrome, Firefox, Internet Explorer, etc.), vea la lista de productos que existen en ese momento en la base de datos. En <strong>Rails</strong>, las rutas se definen en el archivo <code class="highlighter-rouge">config/routes.rb</code> como se muestra en el siguiente ejemplo:</p>

<pre><code class="language-ruby">Rails.application.routes.draw do
  get 'products', to: 'products#index'
end</code></pre>

<p>La segunda línea le dice a <strong>Rails</strong> que las peticiones que lleguen a <code class="highlighter-rouge">/products</code> van a ser procesadas por el método <code class="highlighter-rouge">index</code> de la clase <code class="highlighter-rouge">ProductsController</code>.</p>

<div class="well">A los métodos que procesan las peticiones se les llaman <strong>acciones</strong>, y a las clases que contienen esos métodos se les llaman <strong>controladores</strong>. Los <strong>controladores</strong> se encuentran en la carpeta <code>app/controllers</code>).</div>

<p>Generalmente las <strong>acciones</strong> interactuan con la base de datos y renderizan una vista, pero para este ejemplo simplemente vamos a devolver <code class="highlighter-rouge">&lt;h1&gt;Hola Mundo&lt;/h1&gt;</code>:</p>

<pre><code class="language-ruby">class ProductsController &lt; ApplicationController
  def index
    render html: "&lt;h1&gt;Hola Mundo&lt;/h1&gt;".html_safe
  end
end</code></pre>

<h2 id="las-vistas">Las vistas</h2>

<p>Escribir todo el <strong>HTML</strong> directamente en las <strong>acciones</strong> sería bastante engorroso. Las <strong>vistas</strong> son archivos que se encuentran en la carpeta <code class="highlighter-rouge">app/views</code> y se usan para generar la respuesta que se va a devolver desde las <strong>acciones</strong>. Lo interesante es que en las <strong>vistas</strong> podemos meter (embeber es la palabra correcta) código <strong>Ruby</strong> como en el siguiente ejemplo que imprime <code class="highlighter-rouge">&lt;p&gt;Hola Mundo&lt;/p&gt;</code> 3 veces:</p>

<pre><code class="language-erb">&lt;% 3.times do %&gt;
  &lt;p&gt;Hola Mundo&lt;/p&gt;
&lt;% end %&gt;</code></pre>

<p>Fíjate que el código <strong>Ruby</strong> se debe embeber en las etiquetas <code class="highlighter-rouge">&lt;%</code> y <code class="highlighter-rouge">%&gt;</code>.</p>

<p>En los <strong>controladores</strong>, las <strong>acciones</strong> usan el método <code class="highlighter-rouge">render</code> para renderizar una vista como se muestra en el siguiente ejemplo:</p>

<pre><code class="language-ruby">class ProductsController &lt; ApplicationController
  def index
    render 'products/index'
  end
end</code></pre>

<p>En este caso se renderizaría la <strong>vista</strong> ubicada en <code class="highlighter-rouge">app/views/products/index.html.erb</code>. Fíjate que no fue necesario especificar la carpeta <code class="highlighter-rouge">app/views/</code> ni la extensión <code class="highlighter-rouge">.html.erb</code>, <strong>Rails</strong> se encarga de eso automáticamente. Ahora, lo que confunde a muchos principiantes es que <strong>si hubiésemos omitido la línea</strong> <code class="highlighter-rouge">render 'products/index'</code> del código anterior (es decir, si el método <code class="highlighter-rouge">index</code> estuviera vacío), <strong>igual se renderizaría la misma vista</strong>. La razón es que <strong>Rails</strong> asume que, por defecto, quieres renderizar una vista y usa el nombre del controlador y de la acción para construir la ruta.</p>

<p>La regla es no llamar <code>render</code> explícitamente a menos de que necesites renderizar algo diferente a la vista que se renderiza por defecto (es decir, hubiese sido mejor dejar el método <code class="highlighter-rouge">index</code> vacío en el código anterior).</p>

<div class="well"><strong>Ruby on Rails</strong> usa un concepto llamado <strong><a href="http://es.wikipedia.org/wiki/Convenci%C3%B3n_sobre_Configuraci%C3%B3n" target="_blank">convención sobre configuración</a></strong> para que la estructura de todos los proyectos sea similar y escribamos menos código. La desventaja es que, para los que están aprendiendo, muchas cosas en <strong>Rails</strong> parecen magia mientras entienden la convención y cómo sobrepasarla cuando es necesario.</div>

<p>Las <strong>acciones</strong> pueden pasar información a las vistas a través de variables de instancia (variables que empiezan con <code class="highlighter-rouge">@</code>) como en se muestra el siguiente ejemplo que mostraría <code class="highlighter-rouge">&lt;h1&gt;Hola Mundo&lt;/h1&gt;</code> en el navegador:</p>

<pre><code class="language-ruby">class ProductsController &lt; ApplicationController
  def index
    @greeting = "Hola Mundo"
  end
end</code></pre>

<p>(Fíjate que no llamamos <code class="highlighter-rouge">render</code> explicitamente, así que la <strong>vista</strong> debe estar ubicada en <code class="highlighter-rouge">app/views/products/index.html.erb</code>). El contenido de esa vista es el siguiente:</p>

<pre><code class="language-html">&lt;h1&gt;&lt;%= @greeting %&gt;&lt;/h1&gt;</code></pre>

<p><strong>Nota:</strong> En este caso usamos <code class="highlighter-rouge">&lt;%=</code> porque queremos imprimir el valor de la variable <code class="highlighter-rouge">@greeting</code> en la pantalla.</p>

<h2 id="activerecord">ActiveRecord</h2>

<p><strong>ActiveRecord</strong> es la capa que nos permite <strong>acceder y manipular la información de la base de datos sin necesidad de escribir <a href="http://es.wikipedia.org/wiki/SQL" target="_blank">SQL (Structured Query Language)</a></strong>.</p>

<p>El concepto más importante de <strong>ActiveRecord</strong> es el <strong>modelo</strong>. Un <strong>modelo</strong> es una clase de <strong>Ruby</strong> que extiende <code class="highlighter-rouge">ActiveRecord::Base</code> como se muestra en el siguiente ejemplo:</p>

<pre><code class="language-ruby">class Product &lt; ActiveRecord::Base
end</code></pre>

<p>Un <strong>modelo</strong> representa, generalmente, una tabla de la Base de Datos. <strong>Por convención, el nombre de la tabla es el mismo nombre del modelo pero sin capitalizar y en plural</strong> (<code class="highlighter-rouge">products</code> en este caso). Fíjate que en el <strong>modelo</strong> no definimos las columnas de la tabla explicitamente, <strong>ActiveRecord</strong> las toma de la tabla directamente (por convención).</p>

<p>Las <strong>acciones</strong> en los <strong>controladores</strong> usan los modelos para acceder a la información de la base de datos como se muestra en el siguiente ejemplo:</p>

<pre><code class="language-ruby">class ProductsController &lt; ApplicationController
  def index
    @products = Product.all
  end
end</code></pre>

<p>Y en la vista podemos mostrar los productos en una tabla <strong>HTML</strong>:</p>

<pre><code class="language-html">&lt;table&gt;
  &lt;% @products.each do |product| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= product.name %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= product.description %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= product.price %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;</code></pre>

<p>Otra forma de interactuar con la base de datos, a través de los modelos, es con la consola de <strong>Rails</strong> que se accede con el comando <code class="highlighter-rouge">rails console</code>:</p>

<pre><code class="language-none">$ rails console
&gt; Product.all
# muestra todos los productos

&gt; p1 = Product.create(name: "Cerveza", description: "Yeah", price: 1500)
&gt; p1.name
# imprime "Cerveza"

&gt; p1.price = 1800 # subió de precio :(
&gt; p1.save # guardemos el cambio en la base de datos

&gt; p1.destroy # eliminemos el registro de la base de datos</code></pre>

<p>Sin embargo, el verdadero poder de <strong>ActiveRecord</strong> está en las validaciones y las asociaciones, aunque, por espacio, ese será el tema de otro post.</p>

<h2 id="migraciones">Migraciones</h2>

<p>Las migraciones nos permiten hacer cambios sobre la estructura de la base de datos de forma fácil y consistente, especialmente si multiples personas trabajan sobre el mismo proyecto, o el proyecto ya se encuentra en producción.</p>

<p>Las migraciones son archivos que se encuentran en la carpeta <code class="highlighter-rouge">db/migrate</code> y contienen instrucciones con cambios a la base de datos (creación de tablas, adición o modificación de columnas, etc.). Veamos un ejemplo de una migración:</p>

<pre><code class="language-ruby">class CreateProducts &lt; ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.string :name
      t.text :description

      t.timestamps null: false
    end
  end
end</code></pre>

<p>Esta migración está creando la tabla productos con dos columnas: <code class="highlighter-rouge">name</code> y <code class="highlighter-rouge">description</code>.</p>

<p>Las migraciones se pueden crear manualmente, pero es mejor crearlas con el generador que viene integrado en la aplicación de consola de <strong>Rails</strong> (el tema de la siguiente sección):</p>

<pre><code class="language-none">$ rails generate migration AddPriceToProducts price:decimal</code></pre>

<p>Que generaría la siguiente migración:</p>

<pre><code class="language-ruby">class AddPriceToProducts &lt; ActiveRecord::Migration
  def change
    add_column :products, :price, :decimal
  end
end</code></pre>

<p><strong>Nota:</strong> Al generar una migración, solo estás creando un archivo con instrucciones para modificar la base de datos. Para ejecutar esos cambios en la base de datos debes correr el comando:</p>

<pre><code class="language-none">$ rake db:migrate</code></pre>

<p>Para ver el estado de las migraciones en un proyecto, usa el comando:</p>

<pre><code class="language-none">$ rake db:migrate:status</code></pre>

<h2 id="aplicación-de-consola">Aplicación de Consola</h2>

<p>Una de las razones por las que <strong>Rails</strong> es tan popular es que trae una poderosa aplicación de consola que nos permite, entre otras cosas, generar código a través de comandos.</p>

<p>Por ejemplo, podemos crear la estructura básica de una aplicación con los siguientes comandos:</p>

<pre><code class="language-none">$ rails new mi_app
$ cd mi_app
$ rails g model Product name description price:decimal
$ rails g controller Products
$ rake db:migrate</code></pre>

<p>El tercer comando genera, entre otras cosas:</p>

<ul>
  <li>Un modelo llamado <code class="highlighter-rouge">Product</code>.</li>
  <li>Una migración para crear la tabla <code class="highlighter-rouge">products</code> con tres columnas: <code class="highlighter-rouge">name</code>, <code class="highlighter-rouge">description</code>, y <code class="highlighter-rouge">price</code>.</li>
</ul>

<p>El cuarto comando genera, entre otras cosas:</p>

<ul>
  <li>Un controlador llamado <code class="highlighter-rouge">ProductsController</code>.</li>
  <li>Una carpeta <code class="highlighter-rouge">products</code> dentro de <code class="highlighter-rouge">app/views</code>.</li>
</ul>

<p>El siguiente paso sería crear rutas y vistas que necesitemos para listar, crear, editar y eliminar productos. Existen comandos que nos generarían más código pero no te los recomendamos por ahora para que entiendas cómo funcionan todos los componentes de <strong>Rails</strong>.</p>

<h2 id="más-recursos">Más recursos</h2>

<ul>
  <li><a href="http://railsforzombies.org/">Rails for Zombies</a> - un tutorial interactivo muy interesante.</li>
  <li><a href="http://guides.rubyonrails.org/">Las guías oficiales de Rails</a> - un excelente recurso para aprender de Rails (en Inglés).</li>
  <li><a href="http://www.codecademy.com/en/learn/make-a-rails-app">Codecademy</a> - un tutorial interactivo para crear una aplicación en Rails.</li>
  <li><a href="https://www.railstutorial.org/book">Ruby on Rails Tutorial Book</a> - un libro gratis para que sigas aprendiendo.</li>
</ul>
</div>

                <div class="share-post">
                  <span class="text">Compartir en:</span>
                  <div class="social-networks">
                    <a class="btn-share btn-share-twitter" target="_blank" href="http://twitter.com/share?text=Introducción a Ruby on Rails&url=http://blog.makeitreal.camp/introduccion-ruby-on-rails/&via=makeitrealcamp" rel="nofollow" title="Compartir en Twitter">Twitter</a>
                    <a class="btn-share btn-share-fb" target="_blank" href="http://www.facebook.com/sharer.php?u=http://blog.makeitreal.camp/introduccion-ruby-on-rails/&p[title]=Introducción a Ruby on Rails" rel="nofollow" title="Compartir en Facebook">Facebook</a>
                    <a class="btn-share btn-share-linkedin" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=http://blog.makeitreal.camp/introduccion-ruby-on-rails/&title=Introducción a Ruby on Rails&summary=&source=http://blog.makeitreal.camp/introduccion-ruby-on-rails/" rel="nofollow" title="Compartir en LinkedIn">LinkedIn</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-md-center">
      <div class="col-sm-8">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'makeitreal'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
  </div>
</div>
</div>
    <footer class="main">

    </footer>
  </body>
</html>
