<!DOCTYPE html>
<html lang="es">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title> Módulos de JavaScript </title>
  <meta name="description" content="En este post explicaremos qué son los módulos de JavaScript, cuándo utilizarlos y cómo se comparan con otras soluciones como CommonJS.">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Módulos de JavaScript">
<meta property="og:type" content="article">
<meta property="og:url" content="http://blog.makeitreal.camp/modulos-de-javascript/">


  <meta property="og:image" content="http://blog.makeitreal.camp/assets/images/bg-images/javascript-modules.jpg">



<meta property="og:site_name" content="El Blog de Make it Real">
<meta property="og:locale" content="es_CO">


  <meta property="article:published_time" content="2020-08-04T02:00:00-05:00">
  <meta property="article:author" content="Germán Escobar">



  <link rel="canonical" href="http://blog.makeitreal.camp/modulos-de-javascript/">
  <link rel="alternate" type="application/rss+xml" title="El Blog de Make it Real" href="/feed.xml">

  <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans+Condensed:700|Open+Sans:400,300,600,700' type='text/css'>
  <link rel="stylesheet" href="/assets/stylesheets/main.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/a97e084bfc.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-search@latest/dist/js-search.min.js"></script>
  <script src="/assets/javascripts/main.js" charset="utf-8"></script>
  <script src="/assets/javascripts/prism.min.js" charset="utf-8"></script>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-18132057-9', 'auto');
  ga('send', 'pageview');
</script>

  
</head>

  <body>
    <nav class="main">
  <div class="container">
    <div class="main-content">
      <a href="https://makeitreal.camp/?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=logo"><img src="/assets/images/logo-makeitreal-white.png" alt="Make it Real Logo"></a>
      <div>
        
        <a href="https://makeitreal.camp/?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=programs#programs" class="btn-cta">Conoce nuestros programas</a>
      </div>
      <div class="secret" style="display: none;">HcUy6Re2LLBRtj</div>
    </div>
  </div>
</nav>

    <div class="content"><div class="post-page">
  <div class="container">
    <div class="row justify-content-md-center">
      <div class="col-lg-10 col-xl-9">
        <a href="/">&larr; Volver a la lista de posts</a>

        <div class="post">
          <div class="post-image" style="background-image: url(/assets/images/bg-images/javascript-modules.jpg)"></div>
          <div class="row justify-content-md-center">
            <div class="col-md-10">
              <div class="post-content">
                <div class="post-details">
                  <div class="post-author">
                    <img class="img-responsive" src="//www.gravatar.com/avatar/12270acfe9b6842e1a5b6e594382f149.jpg?s=80"/>
                    <span>Germán Escobar</span>
                  </div>
                  <time class="post-date">Aug 4, 2020</time>
                </div>
                <h1>Módulos de JavaScript</h1>
                <div class="post-body"><p>En este post explicaremos qué son los módulos de JavaScript, cuándo utilizarlos y cómo se comparan con otras soluciones como <strong>CommonJS</strong>.<!-- more --></p>

<p>Aunque la mayoría de lenguajes ofrecen alguna forma de importar código de otros archivos y librerías, JavaScript se pensó para scripts muy cortos en el navegador y al principio no se creía que fuera necesario algo similar.</p>

<p>Con la transición a SPA’a (Single Page Applications) y con la llegada de <a href="https://nodejs.org/" target="\_blank">Node.js</a>, se hizo necesario una solución. Surgieron algunas propuestas como CommonJS (lo que utiliza <a href="https://nodejs.org/" target="\_blank">Node.js</a> por defecto) y <a href="https://requirejs.org/" target="\_blank">RequireJS</a>, pero ninguna de estas soluciones hacen parte del lenguaje.</p>

<p>Finalmente <strong>ECMAScript 2015 (ES6)</strong> introdujo una solución integrada al lenguaje: los módulos de ECMAScript (también conocidos como ESM, módulos de JavaScript, o simplemente módulos). Su adopción ha sido lenta pero gracias a herramientas como <a href="https://babeljs.io/" target="\_blank">Babel</a> o <a href="https://webpack.js.org/" target="\_blank">Webpack</a> hoy podemos hacer uso de ellos.</p>

<p>Antes de entrar a ver la sintaxis de los módulos, veamos qué problema solucionan.</p>

<h2 id="el-problema">El problema</h2>

<p>Supongamos que tenemos dos archivos, donde uno depende de una variable definida en el otro:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// hello.js</span>
<span class="kr">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="s2">"Hola Mundo"</span>
</code></pre>
</div>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span> <span class="c1">// dependemos de la variable hello</span>
</code></pre>
</div>

<p>En JavaScript todas las variables por fuera de una función son globales, así que podemos importar los dos archivos desde nuestro archivo HTML:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"hello.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"print.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<p>Esto funcionaría y veríamos “Hola Mundo” en la consola del navegador. Lo único que debemos tener en cuenta es el orden: no podemos importar <code class="highlighter-rouge">print.js</code> antes de <code class="highlighter-rouge">hello.js</code>.</p>

<p><strong>El principal problema de esta solución es que la variable <code class="highlighter-rouge">hello</code> es una variable global que se puede utilizar o reescribir por error en otro archivo</strong>.</p>

<p>Necesitamos una mejor forma de compartir código entre archivos.</p>

<h2 id="commonjs">CommonJS</h2>

<p>Aunque han surgido varias propuestas para solucionar este problema, la más importante es CommonJS, que es la que utiliza <a href="https://nodejs.org/" target="\_blank">Node.js</a>  por defecto.</p>

<p>CommonJS utiliza la palabra <code class="highlighter-rouge">require</code> para importar código y <code class="highlighter-rouge">module.exports</code> para exportarlo.</p>

<p>Reescribamos el ejemplo anterior utilizando CommonJS:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// hello.js</span>
<span class="kr">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="s2">"Hello World"</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">hello</span>
</code></pre>
</div>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="kr">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"./hello"</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
</code></pre>
</div>

<p>Nota el uso de <code class="highlighter-rouge">module.exports</code> para exportar la variable en <code class="highlighter-rouge">hello.js</code> y de <code class="highlighter-rouge">require</code> para importarla en <code class="highlighter-rouge">print.js</code>.</p>

<p>Esto soluciona el problema de las variables globales compartidas por todos los archivos. Ahora podemos decidir explícitamente qué variables exportar e importar en cada archivo.</p>

<p>Sin embargo, recuerda que CommonJS (y las demás alternativas) no son parte del estándar de ECMAScript.</p>

<p><strong>Nota:</strong> para utilizar CommonJS en el navegador necesitas alguna herramienta como <a href="http://browserify.org/" target="\_blank">Browserify</a> o <a href="https://webpack.js.org/" target="\_blank">Webpack</a> que convierta tu código.</p>

<h2 id="ecmascript-modules">ECMAScript Modules</h2>

<p>ECMAScript 2015 (ES6) introdujo los módulos como parte del estándar.</p>

<p>A diferencia de CommonJS, que utiliza <code class="highlighter-rouge">module.exports</code> para exportar variables, con módulos se utiliza sólo la palabra <code class="highlighter-rouge">export</code>:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// hello.js</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="s2">"Hello World"</span>
</code></pre>
</div>

<p>Para importar código en CommonJS utilizamos <code class="highlighter-rouge">require</code>, pero con los módulos de ES utilizamos <code class="highlighter-rouge">import ... from</code>:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">hello</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./hello'</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
</code></pre>
</div>

<p>También podemos exportar una variable por defecto, que nos permite importarla directamente, sin los corchetes.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// hello.js</span>
<span class="kr">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="s2">"Hello World"</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">hello</span> <span class="c1">// utilizamos default</span>
</code></pre>
</div>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="kr">import</span> <span class="nx">hello</span> <span class="nx">from</span> <span class="s1">'./hello'</span> <span class="c1">// no necesitamos los corchetes</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
</code></pre>
</div>

<p>Ahora que ya conoces la sintaxis, veamos cómo utilizar los módulos en el navegador y en <a href="https://nodejs.org/" target="\_blank">Node.js</a>.</p>

<h3 id="módulos-en-el-navegador">Módulos en el navegador</h3>

<p>La mayoría de navegadores ya soporta módulos directamente (exceptuando Internet Explorer, claro). Para usarlos debes agregarle <code class="highlighter-rouge">type="module"</code> a la etiqueta <code class="highlighter-rouge">script</code>:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span> <span class="na">src=</span><span class="s">"print.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<p>Fíjate que no es necesario agregar la referencia a <code class="highlighter-rouge">hello.js</code> porque <code class="highlighter-rouge">print.js</code> lo importa:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="kr">import</span> <span class="nx">hello</span> <span class="nx">from</span> <span class="s1">'./hello.js'</span> <span class="c1">// es necesario la extensión .js</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
</code></pre>
</div>

<p>Si vas a probar este código localmente, asegúrate de estar utilizando un servidor Web, de lo contrario vas a ver un error de CORS en la consola. Una solución es utilizar el paquete <a href="https://www.npmjs.com/package/http-server" target="\_blank">http-server</a>. Desde la raíz de la carpeta puedes ejecutar los siguientes comandos:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>npm install http-server -g
<span class="gp">$ </span>http-server
</code></pre>
</div>

<p>La pregunta ahora es ls siguiente: si ya es posible utilizar módulos directamente en el navegador ¿para qué usar herramientas como <a href="https://webpack.js.org/" target="\_blank">Webpack</a>?</p>

<p>La respuesta es que, por un lado, seguramente necesitas <a href="https://webpack.js.org/" target="\_blank">Webpack</a> (o alguna herramienta similar) para otras tareas como minimizar tu código, convertirlo a ES5, etc. Por otro lado, puede ser mejor empaquetar todo tu código JavaScript en un archivo, en vez de tener que cargar módulos independientes desde el navegador.</p>

<p>La verdad no conozco ningún proyecto grande que utilice los módulos directamente como explicamos en esta sección, pero es posible que eso empiece a cambiar en un futuro cercano.</p>

<h3 id="módulos-en-nodejs">Módulos en Node.js</h3>

<p><a href="https://nodejs.org/" target="\_blank">Node.js</a> soporta los módulos de forma experimental. Hay dos formas de activarlos.</p>

<p>La primera forma es renombrar tus archivos de <code class="highlighter-rouge">.js</code> a <code class="highlighter-rouge">.mjs</code>. Lo único que debes tener en cuenta es que al importar el archivo debes incluir la extensión <code class="highlighter-rouge">.mjs</code></p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// print.js</span>
<span class="kr">import</span> <span class="nx">hello</span> <span class="nx">from</span> <span class="s1">'./hello.mjs'</span> <span class="c1">// es necesario la extensión .mjs</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>
</code></pre>
</div>

<p>La segunda forma es agregar la propiedad <code class="highlighter-rouge">type</code> con valor <code class="highlighter-rouge">module</code> en el <code class="highlighter-rouge">package.json</code>:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="err">//</span><span class="w"> </span><span class="err">package.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"module"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Con esta forma ya no es necesario renombrar los archivos a <code class="highlighter-rouge">.mjs</code>.</p>

<h2 id="conclusión">Conclusión</h2>

<p>Los módulos cumplen una función muy natural en el desarrollo de software: escribir código modular. La mayoría de lenguajes tienen alguna forma de manejar las dependencias entre archivos, pero eso no existía en el estándar de ECMAScript (y por lo tanto en JavaScript).</p>

<p>Sin embargo, eso no impidió que surgieran soluciones. En este post explicamos CommonJS, que es lo que utiliza por defecto <a href="https://nodejs.org/" target="\_blank">Node.js</a> para ese manejo de dependencias, pero eso no significa que no existieran otras.</p>

<p>La llegada de los módulos es importante porque agrega esta funcionalidad directamente al lenguaje, pero seguramente ha causado mucha confusión: ¿cuándo uso <code class="highlighter-rouge">require</code> y cuándo uso <code class="highlighter-rouge">import</code>?</p>

<p>Espero que este post te haya aclarado esa confusión. Recuerda, en <a href="https://nodejs.org/" target="\_blank">Node.js</a> usas <code class="highlighter-rouge">require</code> (CommonJS) a menos de que hayas activado los módulos. Con <a href="https://webpack.js.org/" target="\_blank">Webpack</a> puedes usar siempre <code class="highlighter-rouge">import</code> (módulos).</p>
</div>

                <div class="share-post">
                  <span class="text">Compartir en:</span>
                  <div class="social-networks">
                    <a class="btn-share btn-share-twitter" target="_blank" href="http://twitter.com/share?text=Módulos de JavaScript&url=http://blog.makeitreal.camp/modulos-de-javascript/&via=makeitrealcamp" rel="nofollow" title="Compartir en Twitter">Twitter</a>
                    <a class="btn-share btn-share-fb" target="_blank" href="http://www.facebook.com/sharer.php?u=http://blog.makeitreal.camp/modulos-de-javascript/&p[title]=Módulos de JavaScript" rel="nofollow" title="Compartir en Facebook">Facebook</a>
                    <a class="btn-share btn-share-linkedin" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=http://blog.makeitreal.camp/modulos-de-javascript/&title=Módulos de JavaScript&summary=&source=http://blog.makeitreal.camp/modulos-de-javascript/" rel="nofollow" title="Compartir en LinkedIn">LinkedIn</a>
                  </div>
                </div>

                <div class="post-magnet">
  <div class="row">
    <div class="col-md-6 push-md-6 text-center">
      <div class="img-wrapper">
        <img src="https://makeitreal.s3.amazonaws.com/images/books/web-developer-guide-book.png" alt="¿Cómo convertirte en Desarrollador Web?">
      </div>
    </div>
    <div class="col-md-6 pull-md-6">
      <div class="content-wrapper">
        <h3>Descarga gratis el e-book</h3>
        <p>Conoce la mentalidad, los roles y las tecnologías que debes saber para convertirte en desarrollador Web.</p>
        <a href="https://makeitreal.camp/como-convertirte-en-web-developer?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=web-developer-guide&utm_term=modulos-de-javascript">Descargar e-book</a>
      </div>
    </div>
  </div>
</div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-md-center">
      <div class="col-sm-8">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'makeitreal'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
  </div>
</div>
</div>
    <footer class="main">
  <div class="container text-right">
    <a href="https://makeitreal.camp/?utm_source=blog&utm_medium=web&utm_campaign=inbound&utm_content=programs#programs" class="btn-cta">Conoce nuestros programas</a>
  </div>
</footer>

  </body>
</html>
